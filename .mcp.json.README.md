# .mcp.json Configuration Guide

This `.mcp.json` file is for **local development** with Claude Code or other MCP clients.

## Quick Setup

1. **Copy this file to your Claude Code MCP config location** (if needed):
   ```bash
   # macOS
   cp .mcp.json ~/Library/Application\ Support/Claude/mcp.json

   # Or keep it here for project-specific MCP testing
   ```

2. **Update the API key**:
   ```json
   "FINNHUB_API_KEY": "your_actual_finnhub_api_key_here"
   ```

   Get your free API key at: https://finnhub.io/register

3. **Review storage directory**:
   ```json
   "FINNHUB_STORAGE_DIR": "/Users/robsherman/Documents/finnhub-data"
   ```
   Change to your preferred location if needed.

4. **Customize enabled tools** (optional):
   - Set to `"true"` to enable a tool category
   - Set to `"false"` to disable and reduce context window usage

   **Mandatory tools** (always keep enabled):
   - `FINNHUB_ENABLE_TECHNICAL_ANALYSIS` - Indicators, patterns, signals
   - `FINNHUB_ENABLE_STOCK_MARKET_DATA` - Quote, candle, tick data
   - `FINNHUB_ENABLE_NEWS_SENTIMENT` - Company news

   **Optional tools** (disable if not trading these assets):
   - `FINNHUB_ENABLE_FOREX` - Foreign exchange (default: false)
   - `FINNHUB_ENABLE_CRYPTO` - Cryptocurrency (default: false)
   - `FINNHUB_ENABLE_BOND` - Bonds (default: false)
   - `FINNHUB_ENABLE_MUTUAL_FUND` - Mutual funds (default: false)

## Configuration Options

### Core Settings

| Variable | Default | Description |
|----------|---------|-------------|
| `FINNHUB_API_KEY` | (required) | Your Finnhub API key |
| `FINNHUB_STORAGE_DIR` | `./finnhub-data` | Where to store data files |
| `FINNHUB_PROJECT_NAME` | `default` | Default project name |
| `FINNHUB_OUTPUT_FORMAT` | `csv` | Output format: csv or json |
| `FINNHUB_OUTPUT_MODE` | `auto` | Output mode: auto, screen, or file |

### Rate Limiting

| Variable | Default | Description |
|----------|---------|-------------|
| `FINNHUB_RATE_LIMIT_PER_MINUTE` | `60` | Free: 60, Premium: 300-600 |
| `FINNHUB_SAFE_TOKEN_LIMIT` | `50000` | Token limit for screen output |

### Tool Enable/Disable

**Core Trading Tools** (Recommended: all enabled)
- `FINNHUB_ENABLE_TECHNICAL_ANALYSIS` - true
- `FINNHUB_ENABLE_STOCK_MARKET_DATA` - true
- `FINNHUB_ENABLE_NEWS_SENTIMENT` - true
- `FINNHUB_ENABLE_STOCK_FUNDAMENTALS` - true
- `FINNHUB_ENABLE_STOCK_ESTIMATES` - true
- `FINNHUB_ENABLE_STOCK_OWNERSHIP` - true
- `FINNHUB_ENABLE_STOCK_ALTERNATIVE_DATA` - true
- `FINNHUB_ENABLE_STOCK_FILINGS` - true

**Multi-Asset Tools** (Optional - disable if not used)
- `FINNHUB_ENABLE_FOREX` - false
- `FINNHUB_ENABLE_CRYPTO` - false
- `FINNHUB_ENABLE_ETF` - true
- `FINNHUB_ENABLE_MUTUAL_FUND` - false
- `FINNHUB_ENABLE_BOND` - false
- `FINNHUB_ENABLE_INDEX` - true

**Discovery Tools** (Recommended)
- `FINNHUB_ENABLE_SCREENING` - true
- `FINNHUB_ENABLE_CALENDAR` - true
- `FINNHUB_ENABLE_ECONOMIC` - true
- `FINNHUB_ENABLE_SPECIALIZED` - false

## Testing the Configuration

Once configured, test the MCP server:

```bash
# Activate virtual environment
source .venv/bin/activate

# Run the server directly
python -m mcp_finnhub

# Or use with MCP client
# The server will be available via the path specified in .mcp.json
```

## Notes

- **Virtual Environment Path**: The command path `.venv/bin/python` assumes you're using a virtual environment in this project directory
- **API Key Security**: Never commit your actual API key to version control
- **Rate Limits**: Free tier is 60 requests/minute, premium is 300-600/minute
- **Premium Features**: Some tools require Finnhub premium subscription (indicators, alternative data, filings)

## Troubleshooting

### Server won't start
- Check that virtual environment exists: `ls .venv/bin/python`
- Verify API key is set: `echo $FINNHUB_API_KEY`
- Check Python version: `python --version` (requires 3.11+)

### Invalid API key error
- Verify your API key at: https://finnhub.io/dashboard
- Check for typos in the key
- Ensure no extra spaces in the config

### Tool not available
- Check that the tool is enabled in `.mcp.json`
- Restart the MCP server after config changes
- Verify Python module is installed: `python -m mcp_finnhub --help`

## See Also

- [ARCHITECTURE.md](docs/ARCHITECTURE.md) - Complete architecture documentation
- [DEVELOPMENT.md](docs/DEVELOPMENT.md) - Development setup and workflow
- [.env.example](.env.example) - Alternative environment variable configuration
